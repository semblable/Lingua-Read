{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kamil\\\\Dropbox\\\\Lingua_Read\\\\client\\\\lingua-read-client\\\\src\\\\App.js\";\nimport React, { useEffect } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { Container } from 'react-bootstrap';\nimport { useAuthStore } from './utils/store';\nimport { jwtDecode } from 'jwt-decode';\nimport Navigation from './components/Navigation';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport TextList from './pages/TextList';\nimport TextCreate from './pages/TextCreate';\nimport TextDisplay from './pages/TextDisplay';\nimport BookList from './pages/BookList';\nimport BookCreate from './pages/BookCreate';\nimport BookDetail from './pages/BookDetail';\nimport Statistics from './pages/Statistics';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  const {\n    token,\n    setToken,\n    clearToken\n  } = useAuthStore();\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    if (storedToken) {\n      try {\n        const decodedToken = jwtDecode(storedToken);\n        const currentTime = Date.now() / 1000;\n        if (decodedToken.exp < currentTime) {\n          clearToken();\n        } else {\n          setToken(storedToken);\n        }\n      } catch (error) {\n        clearToken();\n      }\n    }\n  }, [setToken, clearToken]);\n  return _jsxDEV(\"div\", {\n    className: \"App\",\n    children: [_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), _jsxDEV(Container, {\n      className: \"py-4\",\n      children: _jsxDEV(Routes, {\n        children: [_jsxDEV(Route, {\n          path: \"/\",\n          element: _jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/login\",\n          element: !token ? _jsxDEV(Login, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 50\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/register\",\n          element: !token ? _jsxDEV(Register, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 53\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/books\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/books\",\n          element: token ? _jsxDEV(BookList, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 49\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 64\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/books/create\",\n          element: token ? _jsxDEV(BookCreate, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 56\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 73\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/books/:bookId\",\n          element: token ? _jsxDEV(BookDetail, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 57\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 74\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/texts\",\n          element: token ? _jsxDEV(TextList, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 49\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 64\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/texts/create\",\n          element: token ? _jsxDEV(TextCreate, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 56\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 73\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/texts/:textId\",\n          element: token ? _jsxDEV(TextDisplay, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 57\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 75\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), _jsxDEV(Route, {\n          path: \"/statistics\",\n          element: token ? _jsxDEV(Statistics, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 54\n          }, this) : _jsxDEV(Navigate, {\n            to: \"/login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 71\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","Routes","Route","Navigate","Container","useAuthStore","jwtDecode","Navigation","Home","Login","Register","TextList","TextCreate","TextDisplay","BookList","BookCreate","BookDetail","Statistics","jsxDEV","_jsxDEV","App","token","setToken","clearToken","storedToken","localStorage","getItem","decodedToken","currentTime","Date","now","exp","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","path","element","to"],"sources":["C:/Users/kamil/Dropbox/Lingua_Read/client/lingua-read-client/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport { Container } from 'react-bootstrap';\r\nimport { useAuthStore } from './utils/store';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n// Components\r\nimport Navigation from './components/Navigation';\r\n\r\n// Pages\r\nimport Home from './pages/Home';\r\nimport Login from './pages/Login';\r\nimport Register from './pages/Register';\r\nimport TextList from './pages/TextList';\r\nimport TextCreate from './pages/TextCreate';\r\nimport TextDisplay from './pages/TextDisplay';\r\nimport BookList from './pages/BookList';\r\nimport BookCreate from './pages/BookCreate';\r\nimport BookDetail from './pages/BookDetail';\r\nimport Statistics from './pages/Statistics';\r\n\r\nfunction App() {\r\n  const { token, setToken, clearToken } = useAuthStore();\r\n\r\n  // Check if token is valid on app load\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token');\r\n    if (storedToken) {\r\n      try {\r\n        const decodedToken = jwtDecode(storedToken);\r\n        const currentTime = Date.now() / 1000;\r\n        \r\n        if (decodedToken.exp < currentTime) {\r\n          // Token has expired\r\n          clearToken();\r\n        } else {\r\n          // Token is valid\r\n          setToken(storedToken);\r\n        }\r\n      } catch (error) {\r\n        // Invalid token\r\n        clearToken();\r\n      }\r\n    }\r\n  }, [setToken, clearToken]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Navigation />\r\n      <Container className=\"py-4\">\r\n        <Routes>\r\n          <Route path=\"/\" element={<Home />} />\r\n          <Route path=\"/login\" element={!token ? <Login /> : <Navigate to=\"/books\" />} />\r\n          <Route path=\"/register\" element={!token ? <Register /> : <Navigate to=\"/books\" />} />\r\n          \r\n          {/* Book routes */}\r\n          <Route path=\"/books\" element={token ? <BookList /> : <Navigate to=\"/login\" />} />\r\n          <Route path=\"/books/create\" element={token ? <BookCreate /> : <Navigate to=\"/login\" />} />\r\n          <Route path=\"/books/:bookId\" element={token ? <BookDetail /> : <Navigate to=\"/login\" />} />\r\n          \r\n          {/* Text routes */}\r\n          <Route path=\"/texts\" element={token ? <TextList /> : <Navigate to=\"/login\" />} />\r\n          <Route path=\"/texts/create\" element={token ? <TextCreate /> : <Navigate to=\"/login\" />} />\r\n          <Route path=\"/texts/:textId\" element={token ? <TextDisplay /> : <Navigate to=\"/login\" />} />\r\n          \r\n          {/* Statistics route */}\r\n          <Route path=\"/statistics\" element={token ? <Statistics /> : <Navigate to=\"/login\" />} />\r\n        </Routes>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}